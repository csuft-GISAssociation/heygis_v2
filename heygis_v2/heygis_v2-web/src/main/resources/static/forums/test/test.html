<!DOCTYPE html>
<html>
	<head>
		<meta name="keywords" content="">
		<meta name="description" content="">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="text/javascript" src="js/jquery-2.1.4.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/forums.js"></script>
		<!--script type="text/javascript" src="js/loginJS.js"></script-->
		<script type="text/javascript" src="js/jquery.form.js"></script>
		<script type="text/javascript" src="forums/google-code-prettify/prettify.js"></script>
		<link href="forums/google-code-prettify/prettify.css" type="text/css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<!--link rel="stylesheet" type="text/css" href="css/css.css"-->
		<link rel="stylesheet" type="text/css" href="css/loginStyle.css" />
		<link rel="stylesheet" type="text/css" href="css/forums.css" />
		<link rel="stylesheet" type="text/css" href="css/navCSS.css" />
	</head>

	<body>
		<div id="thread_public" class="thread_public_wraper container hidden-xs">
				<div class="row">
				<form action='addThreadServlet?fid=<%=threadPage.getFid() %>' method="post" id="threadpublic"> 
					<div class="thread_public_content col-center-block col-md-10 col-sm-12">
						<div style="height: auto;">
							<div class="thread_subject col-md-9 col-sm-12">
								<textarea id="thread_subTextarea" name='subject' placeholder="发表新帖：标题" required></textarea>
							</div>
							<div class="clear"></div>
						</div>
						<div id="textarea" style="height: auto;">
							<div class="post_reply_textarea col-md-9 col-sm-12">
								<!--<a herf="#">添加表情</a>-->
								<p>|</p>
								<a onclick="openCode()" class="codeA">添加代码
									<div id="codeDiv">
										<textarea class="codetext form-control" id="code-text" ></textarea>
										<div>
											<a class="btn btn-xs btn-primary codebtn" onclick="addCode()">确定</a>
											<a class="btn btn-xs btn-danger codebtn" onclick="closeCode()">取消</a>
										</div>
									</div>
								</a>
								<p>|</p>
								<a onclick="openImg()" class="codeA">添加图片
									<div id="imgDiv">
									<form name="form_uploadImg" action="" method="POST" enctype="multipart/form-data"> 
										<input type="file" id="uploadFileInput" name="uploadFileInput" value="选择图片" class="btn-sm btn-primary myfile"/>
										<a  class="btn btn-sm btn-primary imgbtn" id="buttonUpload" onclick="return ajaxFileUpload();" >确定</a>
										<a  onclick="closeImg()" class="btn btn-sm btn-danger imgbtn" >取消</a>
									</form>
									</div>
								</a>
								<textarea id="post_textarea" name='message' placeholder="发表新帖：标题" required></textarea>
							</div>	
							<div class="clear"></div>
						</div>
				<form action='addThreadServlet?fid=<%=threadPage.getFid() %>' method="post" id="threadpublic"> 
						<input type="hidden"/>	
						<input type="hidden"/>		
						<div id="submit">
							<input type="button" class="post_reply_submit btn btn-primary" value="发表" onclick="threadpublic()"/>
						</div>
				</form>
						<div class="clear"></div>
					</div>
				
			</div>
		</div>
		<div id="result" style="FONT:12px 宋体"></div><br/>  
		 <img id="loading" src="loading.gif" style="display:none;">  
		 <form name="form_uploadImg" action="" method="POST" enctype="multipart/form-data">  
		 <input id="uploadFileInput" type="file" size="45" name="uploadFileInput" class="input" />  
		 <input type="button" id="buttonUpload" onclick="return ajaxFileUpload();" value="上传图片"/>  
		 </form>  
		<script language="javascript" src="js/ajaxfileupload.js" > </script> 
		<script type="text/javascript">  
	    function ajaxFileUpload()  
	    {  
	      
	    $("#loading")  
	        .ajaxStart(function(){  
	            $(this).show();  
	        })//开始上传文件时显示一个图片  
	        .ajaxComplete(function(){  
	            $(this).hide();  
	        });//文件上传完成将图片隐藏起来  
	          
	       $.ajaxFileUpload({  
	                 url:'../forumImgServlet',             //需要链接到服务器地址  
	                 secureuri:false,  
	                 fileElementId:'uploadFileInput',                         //文件选择框的id属性  
	                 dataType: 'json',                                     //服务器返回的格式，可以是json  
	                 success: function (data, status)             //相当于java中try语句块的用法  
	                 {     
	                    alert(data.src);       //data是从服务器返回来的值     
	                    // $('#result').html('上传图片成功!请复制图片地址<br/>'+data.src);  
	   
	                 },  
	                 error: function (data, status, e)             //相当于java中catch语句块的用法  
	                 {  

		                  alert(0); 
	                	 //$('#result').html('上传图片失败');  
	                 }  
	               }  
	             );  
	    }  
	    </script>   
		
	</body>
<script>
	loged = false;
</script>
</html>